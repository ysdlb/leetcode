//ç»™å®šä¸€ä¸ªæœ‰ N ä¸ªç»“ç‚¹çš„äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹ rootï¼Œæ ‘ä¸­çš„æ¯ä¸ªç»“ç‚¹ä¸Šéƒ½å¯¹åº”æœ‰ node.val æšç¡¬å¸ï¼Œå¹¶ä¸”æ€»å…±æœ‰ N æšç¡¬å¸ã€‚ 
//
// åœ¨ä¸€æ¬¡ç§»åŠ¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸¤ä¸ªç›¸é‚»çš„ç»“ç‚¹ï¼Œç„¶åå°†ä¸€æšç¡¬å¸ä»å…¶ä¸­ä¸€ä¸ªç»“ç‚¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªç»“ç‚¹ã€‚(ç§»åŠ¨å¯ä»¥æ˜¯ä»çˆ¶ç»“ç‚¹åˆ°å­ç»“ç‚¹ï¼Œæˆ–è€…ä»å­ç»“ç‚¹ç§»åŠ¨åˆ°çˆ¶ç»“ç‚¹ã€‚)ã€‚ 
//
// è¿”å›ä½¿æ¯ä¸ªç»“ç‚¹ä¸Šåªæœ‰ä¸€æšç¡¬å¸æ‰€éœ€çš„ç§»åŠ¨æ¬¡æ•°ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//
// è¾“å…¥ï¼š[3,0,0]
//è¾“å‡ºï¼š2
//è§£é‡Šï¼šä»æ ‘çš„æ ¹ç»“ç‚¹å¼€å§‹ï¼Œæˆ‘ä»¬å°†ä¸€æšç¡¬å¸ç§»åˆ°å®ƒçš„å·¦å­ç»“ç‚¹ä¸Šï¼Œä¸€æšç¡¬å¸ç§»åˆ°å®ƒçš„å³å­ç»“ç‚¹ä¸Šã€‚
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//
// è¾“å…¥ï¼š[0,3,0]
//è¾“å‡ºï¼š3
//è§£é‡Šï¼šä»æ ¹ç»“ç‚¹çš„å·¦å­ç»“ç‚¹å¼€å§‹ï¼Œæˆ‘ä»¬å°†ä¸¤æšç¡¬å¸ç§»åˆ°æ ¹ç»“ç‚¹ä¸Š [ç§»åŠ¨ä¸¤æ¬¡]ã€‚ç„¶åï¼Œæˆ‘ä»¬æŠŠä¸€æšç¡¬å¸ä»æ ¹ç»“ç‚¹ç§»åˆ°å³å­ç»“ç‚¹ä¸Šã€‚
// 
//
// ç¤ºä¾‹ 3ï¼š 
//
// 
//
// è¾“å…¥ï¼š[1,0,2]
//è¾“å‡ºï¼š2
// 
//
// ç¤ºä¾‹ 4ï¼š 
//
// 
//
// è¾“å…¥ï¼š[1,0,0,null,3]
//è¾“å‡ºï¼š4
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// 1<= N <= 100 
// 0 <= node.val <= N 
// 
// Related Topics æ ‘ æ·±åº¦ä¼˜å…ˆæœç´¢ äºŒå‰æ ‘ ğŸ‘ 304 ğŸ‘ 0


//leetcode submit region begin(Prohibit modification and deletion)

/**
 * Definition for a binary tree node.
 */
class Solution979 {
    /**
     * é¢˜ç›®æ²¡æœ‰è¯´æœ€å°‘ç§»åŠ¨æ¬¡æ•°, æ‰€ä»¥æ„Ÿè§‰ä¸ç®¡æ€ä¹ˆæ“ä½œ, ç§»åŠ¨æ¬¡æ•°æ˜¯å›ºå®šçš„
     *
     * f(node) è¡¨ç¤º node è¿™æ£µæ ‘éœ€è¦ä»è¿™æ£µæ ‘ç§»å‡ºç¡¬å¸çš„æ•°é‡
     * å¦‚æœæ˜¯è´Ÿæ•°, åˆ™ä»£è¡¨ç§»è¿›, æ¯”å¦‚å¯¹ä»»æ„ä¸€ä¸ªéç©ºèŠ‚ç‚¹, æ€»éœ€è¦ä¸€æšç¡¬å¸, æ‰€ä»¥å®ƒå¤©ç„¶éœ€è¦ +(-1)
     *
     * å¯¹ä»»æ„çš„ root èŠ‚ç‚¹, å·¦å­æ ‘, å³å­æ ‘
     * root.val >= 0
     * f(root.left), ä»¥åŠ f(root.right)
     *
     *   1
     * 0    0
     *
     * 1 + (-1) + (-1) - 1 = -2
     *
     *  0
     * 2  2
     * 0 + (1) + (1) - 1 = 1
     *
     * f(root) = root.val + f(left) + f(right) - 1
     *
     * å› ä¸ºé¢˜ç›®ä¿è¯ N ä¸ªèŠ‚ç‚¹æ€»æ˜¯æœ‰ N æšç¡¬å¸, æ‰€ä»¥ f(root) == 0;
     * è¿™æ£µæ ‘ä¸­æ¯æ¡è¾¹å¯¹åº”çš„å­©å­èŠ‚ç‚¹çš„ f(child) ç»å¯¹å€¼ä¹‹å’Œ, å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„æœ€ç»ˆå€¼
     */
    public int distributeCoins(TreeNode root) {
        return distribute(root)[1];
    }

    /**
     * @return [a, b]
     * a è¡¨ç¤º f(root) çš„å€¼, b root è¿™æ£µæ ‘éœ€è¦ç§»åŠ¨çš„ç¡¬å¸æ•°é‡ä¹‹å’Œ
     *
     * è¿™é‡Œçš„ b åªä¼šä¾èµ–å­ä»»åŠ¡ a çš„å€¼, æ‰€ä»¥ b å¯ä»¥ç”¨ä¸€ä¸ªå…¨å±€å˜é‡, ç´¯åŠ è¿‡ç¨‹å€¼ä¹Ÿå¯
     */
    public int[] distribute(TreeNode root) {
        if (root == null) return new int[]{0, 0};

        int[] left = distribute(root.left);
        int[] right = distribute(root.right);

        int a = root.val + left[0] + right[0] - 1;
        int b = Math.abs(left[0]) + Math.abs(right[0]) + left[1] + right[1];
        return new int[]{a, b};
    }

    private static class TreeNode {
        int val;
        TreeNode left;
        TreeNode right;
        TreeNode() {}
        TreeNode(int val) { this.val = val; }
        TreeNode(int val, TreeNode left, TreeNode right) {
            this.val = val;
            this.left = left;
            this.right = right;
        }
    }
}
//leetcode submit region end(Prohibit modification and deletion)
