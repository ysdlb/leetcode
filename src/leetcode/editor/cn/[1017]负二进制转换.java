//ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œä»¥äºŒè¿›åˆ¶å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›è¯¥æ•´æ•°çš„ è´ŸäºŒè¿›åˆ¶ï¼ˆbase -2ï¼‰è¡¨ç¤ºã€‚ 
//
// æ³¨æ„ï¼Œé™¤éå­—ç¬¦ä¸²å°±æ˜¯ "0"ï¼Œå¦åˆ™è¿”å›çš„å­—ç¬¦ä¸²ä¸­ä¸èƒ½å«æœ‰å‰å¯¼é›¶ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//è¾“å…¥ï¼šn = 2
//è¾“å‡ºï¼š"110"
//è§£é‡Šï¼š(-2)Â² + (-2)Â¹ = 2
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//è¾“å…¥ï¼šn = 3
//è¾“å‡ºï¼š"111"
//è§£é‡Šï¼š(-2)Â² + (-2)Â¹ + (-2)â° = 3
// 
//
// ç¤ºä¾‹ 3ï¼š 
//
// 
//è¾“å…¥ï¼šn = 4
//è¾“å‡ºï¼š"100"
//è§£é‡Šï¼š(-2)Â² = 4
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// 0 <= n <= 10â¹ 
// 
//
// Related Topics æ•°å­¦ ğŸ‘ 107 ğŸ‘ 0


//leetcode submit region begin(Prohibit modification and deletion)
class Solution1017 {
    /* è´ŸäºŒè¿›åˆ¶è½¬æ¢: https://leetcode.cn/problems/convert-to-base-2/
     * ç›¸ä¼¼é¢˜:
     *   1073.è´ŸäºŒè¿›åˆ¶æ•°ç›¸åŠ : https://leetcode.cn/problems/adding-two-negabinary-numbers/
     *
     * å¯¹ base N çš„è½¬æ¢é—®é¢˜ï¼Œä¸€èˆ¬éƒ½æ˜¯å¯¹å€¼å…ˆå–æ¨¡ï¼Œåœ¨é™¤ä»¥è¿™ä¸ªæ•°
     * ä»»æ„ä¸€ä¸ªæ•° % -2ï¼Œ å¯èƒ½çš„å€¼æœ‰ 1,0,-1; å¯¹äº -1 æˆ‘ä»¬æ— æ³•è¯æ˜æ€ä¹ˆå¤„ç†
     *
     * è‹¥äºŒè¿›åˆ¶çš„å¥‡å¶ä½åˆ†å¼€è®¨è®ºï¼Œå› ä¸ºäºŒè¿›åˆ¶ä½çš„ 0 ä¸ä¼šæœ‰ä»»ä½•è´¡çŒ®ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè®¨è®ºäºŒè¿›åˆ¶ä¸º 1 çš„æƒ…å†µ
     *   å¶æ•°ä½(0,2,4,...): -2 çš„åŸºç­‰ä»·äº åŸº2
     *   å¥‡æ•°ä½(1,3,5,...): -2 çš„åŸºç­‰ä»·äº åŸº2 2^i --> (-2)^(i+1) + (-2)^i
     * è‹¥æœ€ä½ä½æ˜¯å¥‡æ•°ä½, åˆ™ 1 --> 11
     *   é—®é¢˜æ˜¯è‹¥é«˜ä½å¶æ•°ä½åŸæœ¬å°±æ˜¯ 1ï¼Œåˆ™ 11 --> 21
     * ä¸€ä¸ªæ•°å¤©ç„¶å¯ä»¥æ˜¯ åŸº2 è¡¨ç¤ºçš„æ•°ï¼Œæˆ‘ä»¬æŒ‰ç…§ä¸Šè¿°è§„åˆ™å°† åŸº2 è½¬åŒ–ä¸º åŸº-2 å³å¯
     *
     * n & 0xaaaaaaaa å¯æŠ½å‡ºå¥‡æ•°ä½çš„å€¼æ¥
     * ä¸‹é¢å°† åŸº2 çš„æ•°è½¬åŒ–ä¸º ç­‰ä»·çš„åŸº-2
     * å¯¹äº "111"
     *   å¶æ•°ä½: "101" --> åŸº-2("101")
     *   å¥‡æ•°ä½: "010" --> åŸº-2("110")
     * åŸº-2å’Œ("211") --> å¶æ•°ä½ "2" == "110" --> "11011"
     * è¿™ç§æ–¹å¼çš„è½¬åŒ–éœ€è¦ä¸€å±‚ä¸€å±‚å»é™¤å¶æ•°ä½çš„ 2ï¼Œä½†åˆå¼•å…¥å¥‡æ•°ä½çš„æ–°å˜åŒ–ï¼Œé€»è¾‘ç¨å¾®æ··ä¹±
     *
     * ä¸Šè¿°æ–¹å¼çš„éš¾ç‚¹åœ¨äº åŸº-2 çš„å½¢å¼æ— æ³•ç”¨æ­£å¸¸çš„è¿ç®—é€»è¾‘å¤„ç†
     * è‹¥æˆ‘ä»¬å°†ä¸€ä¸ªæ•°æŒ‰ åŸº2 çš„å±•ç°å½¢å¼ä»ä½ä½åˆ°é«˜ä½ä¾æ¬¡è½¬æ¢ä¸º åŸº-2, æœªè½¬æ¢åŒ–çš„éƒ¨åˆ†å§‹ç»ˆå±äº åŸº2 è¡¨ç¤ºï¼Œè¿™éƒ¨åˆ†å¯ä»¥èµ°æ­£å¸¸çš„è¿ç®—
     * é‚£ä¹ˆä»…éœ€è¦å¤„ç†å¥‡æ•°ä½ä¸º 1 çš„ä¸€ç§æƒ…å†µ: 2^i --> (-2)^(i+1) + (-2)^i
     *   è‹¥ åŸº2 å½¢å¼æ•° x çš„æŸå¥‡æ•°ä½ä¸º 1, å¦‚æœæˆ‘ä»¬å°† åŸº-2 å½¢å¼çš„è¯¥ä½ä¹Ÿè®¾ç½®ä¸º 1ï¼ŒåŸå€¼ x éœ€è¦è‡ªå¢åˆ° N æ‰å¯ä»¥ä¿æŒå€¼ä¸å˜
     *   è®¾é«˜ä½ (åŒ…å«å½“å‰å¥‡æ•°ä½) è¡¨ç¤ºçš„å€¼å¤§å°ä¸º C, i ä¸ºå¥‡æ•°ä½. æ¯”å¦‚ arr = "10111000", C = "10111", i == 3
     *     C * 2^i = (-2)^i + N
     *     ==> N = C * 2^i + 2^i = (C+1) * 2^i
     * ä»…éœ€è¦å°†é«˜ä½å€¼ C è‡ªå¢ 1 å³å¯
     * C+1 å¯¹ç»“æœæœ‰å½±å“ï¼Œ
     * C-1 å¯¹ç»“æœæ— å½±å“; è‹¥è¯¥ä½ base2 ä¸º 1, (C-1)/2 == C/2
     *
     * è‹¥ C < 0, å¯ä»¥ç­‰ä»·ä¸è´Ÿçš„æ­£æ•´æ•° -C, å…¶äºŒè¿›åˆ¶è¡¨ç¤ºå’Œæ­£æ•°ç›¸åŒï¼Œä½†æ¯ä½çš„æ„ä¹‰è¡¨ç¤ºçš„æ˜¯ -(2^i)
     * è‹¥ i ä¸ºå¥‡æ•°, åˆ™æ— é¡»å¤„ç† -(2^i) == (-2)^i
     * è‹¥ i ä¸ºå¶æ•°, -(2^i) --> (-2)^(i+1) + (-2)^i; æ­¤æ—¶éœ€è¦åœ¨å¥‡æ•°ä½ä¸ŠåŠ  1
     *   -C * 2^i = 2^i - N
     *   ==> N = (C+1) * 2^i
     *
     * ä¼˜é›…ä¸€ç‚¹çš„è½¬æ¢æ–¹å¼:
     *   o. "111" % 2 == 1 --> (1, "11") /2
     *   j. "11" % 2 == 1  --> (1, "10") +1 /2
     *   o. "10" % 2 == 0 --> (0, "1") /2
     *   j. "1" % 2 == 1 --> (1, "1") +1 /2
     *   o. "1" % 2 == 1 --> (1, "0") /2
     */
    public String baseNeg2(int n) {
        if (n == 0) return "0";

        int k = n > 0 ? 1 : -1;
        n = n > 0 ? n : -n;
        StringBuilder ret = new StringBuilder();
        while (n != 0) {
            if (n % 2 != 0) {
                ret.append('1');
                // å¥‡æ•°ä½ == 1 çš„è¯ä¸€å®šä¼š +1, æ ¹æ®ç­‰å¼ C * 2^i = (-2)^i + (C+1) * 2^i æ¥ä¿æŒå€¼ä¸€ç›´ç›¸ç­‰
                // å¶æ•°ä½ == 1 çš„è¯ï¼Œä¸€å®šä¼š -1ï¼Œä½†å‡ä¸å‡è¿™ä¸ªå€¼å¯¹ç»“æœæ— å½±å“ï¼Œå› ä¸ºåé¢ä¼š /2ï¼Œè¿™æ ·å¯ä»¥çœå»ä¸€ä¸ª if åˆ¤æ–­
                n -= k;
            } else {
                ret.append('0');
            }
            k = -k;
            n >>>= 1;
        }

        return ret.reverse().toString();
    }

    public static void main(String[] args) {
        Solution1017 solution = new Solution1017();
        System.out.println(solution.baseNeg2(1));
        System.out.println(solution.baseNeg2(-2));
        System.out.println(solution.baseNeg2(3));
        System.out.println(solution.baseNeg2(4));
        System.out.println(solution.baseNeg2(5));
        System.out.println(solution.baseNeg2(6));
        System.out.println(solution.baseNeg2(7));
    }

}
//leetcode submit region end(Prohibit modification and deletion)
