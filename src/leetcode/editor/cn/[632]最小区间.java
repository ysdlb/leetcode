//ä½ æœ‰ k ä¸ª éé€’å‡æ’åˆ— çš„æ•´æ•°åˆ—è¡¨ã€‚æ‰¾åˆ°ä¸€ä¸ª æœ€å° åŒºé—´ï¼Œä½¿å¾— k ä¸ªåˆ—è¡¨ä¸­çš„æ¯ä¸ªåˆ—è¡¨è‡³å°‘æœ‰ä¸€ä¸ªæ•°åŒ…å«åœ¨å…¶ä¸­ã€‚ 
//
// æˆ‘ä»¬å®šä¹‰å¦‚æœ b-a < d-c æˆ–è€…åœ¨ b-a == d-c æ—¶ a < cï¼Œåˆ™åŒºé—´ [a,b] æ¯” [c,d] å°ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//è¾“å…¥ï¼šnums = [[4,10,15,24,26], [0,9,12,20], [5,18,22,30]]
//è¾“å‡ºï¼š[20,24]
//è§£é‡Šï¼š 
//åˆ—è¡¨ 1ï¼š[4, 10, 15, 24, 26]ï¼Œ24 åœ¨åŒºé—´ [20,24] ä¸­ã€‚
//åˆ—è¡¨ 2ï¼š[0, 9, 12, 20]ï¼Œ20 åœ¨åŒºé—´ [20,24] ä¸­ã€‚
//åˆ—è¡¨ 3ï¼š[5, 18, 22, 30]ï¼Œ22 åœ¨åŒºé—´ [20,24] ä¸­ã€‚
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//è¾“å…¥ï¼šnums = [[1,2,3],[1,2,3],[1,2,3]]
//è¾“å‡ºï¼š[1,1]
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// nums.length == k 
// 1 <= k <= 3500 
// 1 <= nums[i].length <= 50 
// -10âµ <= nums[i][j] <= 10âµ 
// nums[i] æŒ‰éé€’å‡é¡ºåºæ’åˆ— 
// 
//
// 
//
// Related Topics è´ªå¿ƒ æ•°ç»„ å“ˆå¸Œè¡¨ æ’åº æ»‘åŠ¨çª—å£ å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ ğŸ‘ 402 ğŸ‘ 0


import java.util.Comparator;
import java.util.List;
import java.util.Map;
import java.util.PriorityQueue;

//leetcode submit region begin(Prohibit modification and deletion)
class Solution632 {
    /* 632.æœ€å°åŒºé—´: https://leetcode.cn/problems/smallest-range-covering-elements-from-k-lists/
     * ç›¸ä¼¼é¢˜ç›®:
     *  373.æŸ¥æ‰¾å’Œæœ€å°çš„ K å¯¹æ•°å­—: https://leetcode.cn/problems/find-k-pairs-with-smallest-sums/
     * ç›¸ä¼¼æ»‘åŠ¨çª—å£è§£æ³•:
     *  76.æœ€å°è¦†ç›–å­ä¸²: https://leetcode.cn/problems/minimum-window-substring/
     *
     * ä¼˜å…ˆåŒºé—´èŒƒå›´æ›´å°, å…¶æ¬¡åŒºé—´ä½ç½®é å·¦.
     * æ•°ç»„æ¯è¡Œéé€’å‡, æœ‰ä»€ä¹ˆç”¨å‘¢?
     *
     * çœ‹äº†é¢˜è§£:
     * é¢˜ç›®ç­‰ä»·äºä» n è¡Œæ•°ä¸­å„å–ä¸€ä¸ªæ•°, ä½¿å¾—å®ƒä»¬çš„æœ€å¤§å€¼å’Œæœ€å°å€¼çš„å·®æœ€å°
     *
     * ä¸¤ç§è§£æ³•
     *  1. n è¡Œåˆå¹¶ä¸ºä¸€è¡Œ, ç”¨æ»‘åŠ¨çª—å£æ¥åš, ç±»ä¼¼ 76 é¢˜
     *  2. è´ªå¿ƒ, åˆ©ç”¨è¡Œæœ‰åº, ä¾æ¬¡æŒ‰æ¸¸æ ‡ä»æ¯ä¸€è¡Œä¾æ¬¡å–å€¼, ä¸æ–­å»é™¤æœ€å°å€¼, æ”¾å…¥æ”¹è¡Œçš„ä¸‹ä¸€ä¸ªå€¼ (éšå«çª—å£æ”¶ç¼©æ‰©å¼ )
     *
     * è´ªå¿ƒæ€è·¯ (ç±»ä¼¼ 373 é¢˜)
     * æ¯æ¬¡éƒ½å°†å½“å‰åŒºé—´ä¸­æœ€å°çš„å…ƒç´ ä¸¢å¼ƒï¼Œæ¢æˆå…¶åŸå§‹æ•°ç»„ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚
     * å°±æ˜¯è¯´ï¼Œå¦‚æœå½“å‰æˆ‘ä»¬ä»æ¯ä¸ªåŒºé—´ä¸­é€‰å–çš„å…ƒç´ åˆ†åˆ«æ˜¯ a1_1,a2_1,a3_1...ak_1
     *   (å‰é¢çš„æ•°å­—ä»£è¡¨æ¥è‡ªç¬¬å‡ ä¸ªæ•°ç»„ï¼Œåé¢çš„æ•°å­—è¡¨ç¤ºè¯¥æ•°æ˜¯è¯¥æ•°ç»„çš„ç¬¬å‡ ä¸ªå…ƒç´ ),
     * è‹¥æ­¤æ—¶æœ€å°çš„å…ƒç´ æ˜¯ ai_1ï¼Œæœ€å¤§å…ƒç´ æ˜¯ aj_1 ï¼Œé‚£ä¹ˆåŒºé—´å°±ä¸º [ai_1, aj_1]ï¼Œ
     * åŒºé—´ä¸­æœ€å°å…ƒç´ æ˜¯ ai_1,é‚£ä¹ˆæˆ‘ä»¬å°±å°† ai_1 ä¸¢å¼ƒ,å°† ai_2 æ‹¿å‡ºæ¥æ”¾è¿›å»ã€‚
     *
     * å¦‚æœä¸æ¢ ai_1 ,é‚£ä¹ˆåŒºé—´çš„èµ·ç‚¹å°±ä¸€ç›´æ˜¯ ai_1 ,è€Œä¸”åŒºé—´é•¿åº¦ä¸å¯èƒ½ç¼©å°ï¼ŒåŒºé—´é•¿åº¦å–å†³äºèµ·ç‚¹å’Œç»ˆç‚¹ï¼Œè€Œç»ˆç‚¹æ˜¯ä¸å¯èƒ½å˜å°çš„ã€‚
     * å› ä¸ºæˆ‘ä»¬æ˜¯ä»å°åˆ°å¤§è¿›è¡Œå…ƒç´ çš„é€‰å–ï¼Œæˆ‘ä»¬æ¯æ¬¡ä¸¢å¼ƒä¸€ä¸ªå…ƒç´ ï¼Œå°±è¦é€‰æ‹©å®ƒåœ¨åŸæ•°ç»„ä¸­çš„ä¸‹ä¸€ä½ï¼Œè€ŒåŸæ•°ç»„æ˜¯å‡åºæ’åˆ—çš„ã€‚æ•…ç»ˆç‚¹ä¸å¯èƒ½å‡å°ã€‚
     * é‚£ä¹ˆï¼Œæˆ‘ä»¬åªèƒ½å¤Ÿé€šè¿‡è®©èµ·ç‚¹å¢å¤§æ¥æ˜¯åŒºé—´ç¼©å°ï¼Œå³æ¯æ¬¡ä¸¢å¼ƒæœ€å°çš„å…ƒç´ ï¼Œæ¢æˆå®ƒåŸæ•°ç»„çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚
     * ç„¶åå†è®¡ç®—å½“å‰æ‰€é€‰åŒºé—´çš„é•¿åº¦ï¼Œå¦‚æœå°äºä¹‹å‰çš„åŒºé—´é•¿åº¦å°±æ›´æ–°å³å¯ã€‚
     *
     * ç»“æŸæ¡ä»¶: ä»»æ„ä¸€è¡Œè¾¾åˆ°è¯¥è¡Œç»ˆç‚¹
     */
    public int[] smallestRange(List<List<Integer>> nums) {
        // {åˆ—ç´¢å¼•, è¡Œç´¢å¼•}
        PriorityQueue<int[]> minHeap = new PriorityQueue<>(Comparator.comparingInt(e -> nums.get(e[0]).get(e[1])));

        int l = 0, r = Integer.MAX_VALUE;
        int right = Integer.MIN_VALUE;
        for (int i = 0; i < nums.size(); i++) {
            minHeap.offer(new int[]{i, 0});
            right = Math.max(right, nums.get(i).get(0));
        }

        for (;;) {
            // çª—å£æ”¶ç¼©
            int[] minE = minHeap.poll();
            int x = minE[0], y = minE[1];
            int left = nums.get(x).get(y);
            if (right - left < r - l) {
                l = left;
                r = right;
            }

            // ä»»æ„ä¸€è¡Œåˆ°è¾¾æœ«ç«¯, ç»“æŸ
            if (++y >= nums.get(x).size())
                break;

            // çª—å£å³æ‰©
            right = Math.max(right, nums.get(x).get(y));
            minHeap.offer(new int[]{x, y});
        }
        return new int[]{l, r};
    }
}
//leetcode submit region end(Prohibit modification and deletion)
