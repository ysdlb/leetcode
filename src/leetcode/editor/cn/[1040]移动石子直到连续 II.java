//åœ¨ä¸€ä¸ªé•¿åº¦ æ— é™ çš„æ•°è½´ä¸Šï¼Œç¬¬ i é¢—çŸ³å­çš„ä½ç½®ä¸º stones[i]ã€‚å¦‚æœä¸€é¢—çŸ³å­çš„ä½ç½®æœ€å°/æœ€å¤§ï¼Œé‚£ä¹ˆè¯¥çŸ³å­è¢«ç§°ä½œ ç«¯ç‚¹çŸ³å­ ã€‚ 
//
// æ¯ä¸ªå›åˆï¼Œä½ å¯ä»¥å°†ä¸€é¢—ç«¯ç‚¹çŸ³å­æ‹¿èµ·å¹¶ç§»åŠ¨åˆ°ä¸€ä¸ªæœªå ç”¨çš„ä½ç½®ï¼Œä½¿å¾—è¯¥çŸ³å­ä¸å†æ˜¯ä¸€é¢—ç«¯ç‚¹çŸ³å­ã€‚ 
//
// å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœçŸ³å­åƒ stones = [1,2,5] è¿™æ ·ï¼Œä½ å°† æ— æ³• ç§»åŠ¨ä½äºä½ç½® 5 çš„ç«¯ç‚¹çŸ³å­ï¼Œå› ä¸ºæ— è®ºå°†å®ƒç§»åŠ¨åˆ°ä»»ä½•ä½ç½®ï¼ˆä¾‹å¦‚ 0 æˆ– 3ï¼‰
//ï¼Œè¯¥çŸ³å­éƒ½ä»ç„¶ä¼šæ˜¯ç«¯ç‚¹çŸ³å­ã€‚ 
//
// å½“ä½ æ— æ³•è¿›è¡Œä»»ä½•ç§»åŠ¨æ—¶ï¼Œå³ï¼Œè¿™äº›çŸ³å­çš„ä½ç½®è¿ç»­æ—¶ï¼Œæ¸¸æˆç»“æŸã€‚ 
//
// è¦ä½¿æ¸¸æˆç»“æŸï¼Œä½ å¯ä»¥æ‰§è¡Œçš„æœ€å°å’Œæœ€å¤§ç§»åŠ¨æ¬¡æ•°åˆ†åˆ«æ˜¯å¤šå°‘ï¼Ÿ ä»¥é•¿åº¦ä¸º 2 çš„æ•°ç»„å½¢å¼è¿”å›ç­”æ¡ˆï¼šanswer = [minimum_moves, 
//maximum_moves] ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//è¾“å…¥ï¼š[7,4,9]
//è¾“å‡ºï¼š[1,2]
//è§£é‡Šï¼š
//æˆ‘ä»¬å¯ä»¥ç§»åŠ¨ä¸€æ¬¡ï¼Œ4 -> 8ï¼Œæ¸¸æˆç»“æŸã€‚
//æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥ç§»åŠ¨ä¸¤æ¬¡ 9 -> 5ï¼Œ4 -> 6ï¼Œæ¸¸æˆç»“æŸã€‚
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//è¾“å…¥ï¼š[6,5,4,3,10]
//è¾“å‡ºï¼š[2,3]
//è§£é‡Šï¼š
//æˆ‘ä»¬å¯ä»¥ç§»åŠ¨ 3 -> 8ï¼Œæ¥ç€æ˜¯ 10 -> 7ï¼Œæ¸¸æˆç»“æŸã€‚
//æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥ç§»åŠ¨ 3 -> 7, 4 -> 8, 5 -> 9ï¼Œæ¸¸æˆç»“æŸã€‚
//æ³¨æ„ï¼Œæˆ‘ä»¬æ— æ³•è¿›è¡Œ 10 -> 2 è¿™æ ·çš„ç§»åŠ¨æ¥ç»“æŸæ¸¸æˆï¼Œå› ä¸ºè¿™æ˜¯ä¸åˆè¦æ±‚çš„ç§»åŠ¨ã€‚
// 
//
// ç¤ºä¾‹ 3ï¼š 
//
// 
//è¾“å…¥ï¼š[100,101,104,102,103]
//è¾“å‡ºï¼š[0,0] 
//
// 
//
// æç¤ºï¼š 
//
// 
// 3 <= stones.length <= 10^4 
// 1 <= stones[i] <= 10^9 
// stones[i] çš„å€¼å„ä¸ç›¸åŒã€‚ 
// 
//
// 
//
// Related Topics æ•°ç»„ æ•°å­¦ åŒæŒ‡é’ˆ æ’åº ğŸ‘ 150 ğŸ‘ 0


import java.lang.reflect.Array;
import java.util.Arrays;

//leetcode submit region begin(Prohibit modification and deletion)
class Solution1040 {

    /* ç§»åŠ¨çŸ³å­ç›´åˆ°è¿ç»­ II: https://leetcode.cn/problems/moving-stones-until-consecutive-ii/
     * ç±»ä¼¼é¢˜:
     * 1033: ç§»åŠ¨çŸ³å­ç›´åˆ°è¿ç»­: https://leetcode.cn/problems/moving-stones-until-consecutive/
     *
     * ä¸åŒäº 1033
     *   1. çŸ³å­æ•°é‡å¾ˆå¤š
     *   2. å­˜åœ¨ç§»åŠ¨åä¸å†æ˜¯ç«¯ç‚¹çš„é™åˆ¶ (å¯¹æœ€å°/æœ€å¤§ç§»åŠ¨æ¬¡æ•°å‡æœ‰å½±å“)
     *
     * æ€è·¯:
     *   çŸ³å­åœ¨æ•°è½´ä¸Šå¤©ç„¶æœ‰åºï¼Œæˆ‘ä»¬å¿…é¡»å¯¹æ•°ç»„æ’åºæ¥æ»¡è¶³è¿™ä¸ªæ¡ä»¶
     *   ç”¨è´ªå¿ƒçš„æ€è·¯æ¨¡æ‹Ÿæœ€å°/æœ€å¤§çš„è¿‡ç¨‹
     *
     * çœ‹äº†ç­”æ¡ˆä¹‹å:
     *   è®¾çŸ³å­é—´çš„ç©ºä½æ€»æ•°ä¸º kï¼Œæ ¹æ®ç§»åŠ¨çš„ç‰¹ç‚¹ï¼Œæ¯æ¬¡ç§»åŠ¨éƒ½ä¼šä½¿ k çš„å€¼å‡å°ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä½¿ k çš„å€¼é™ä½åˆ° 0
     *   k = a[-1] - a[0] - a.length + 1
     *
     * æ¯æ¬¡åªèƒ½ç§»åŠ¨è¾¹ç¼˜çš„ä¸¤ä¸ªçŸ³å­ä¹‹ä¸€,
     *   è‹¥ç§»åŠ¨æœ€å·¦è¾¹çš„çŸ³å­, åˆ™å¿…å®šæ¶ˆç­ a[1] - a[0] - 1 + 1 = a[1] - a[0] ä¸ªç©ºä½
     *   è‹¥ç§»åŠ¨æœ€å³è¾¹çš„çŸ³å­, åˆ™å¿…å®šæ¶ˆç­ a[-1] - a[-2] ä¸ªç©ºä½
     * è‹¥æœ‰ n å…ƒç´ ï¼Œåˆ™æœ€ç»ˆè‚¯å®šæ˜¯ä¸€ä¸ªå®½åº¦ä¸º n çš„è¢«å¡«æ»¡çš„çª—å£ã€‚
     *
     * æ±‚æœ€å¤§ (ä»å…¨å±€è§’åº¦è´ªå¿ƒæ¨¡æ‹Ÿ):
     *   ç¬¬ä¸€æ¬¡ç§»åŠ¨æ ¹æ®æ¶ˆç­ç©ºä½çš„æ•°é‡åœ¨å·¦å³ä¸¤è¾¹é€‰ä¸€ä¸ªè¾ƒå°çš„ï¼Œåç»­å¯ä»¥æ§åˆ¶æ¯æ¬¡ç§»åŠ¨ä»…æ¶ˆç­ä¸€ä¸ªç©ºä½
     *   å³æœ€ç»ˆå€¼ä¸º k - min{a[1]-a[0], a[-1]-a[-2]} + 1
     *
     * æ±‚æœ€å° (ä»çª—å£è§’åº¦çœ‹æœ€ç»ˆç»“æœ):
     *   ä»¥æœ€ç»ˆè¿ç»­çš„ n ä¸ªçŸ³å­ä¸ºç›®æ ‡ï¼Œä¼šå¯¹åº”ä¸€ä¸ªçª—å£ [i,j] (a[j] - a[i] + 1 <= n)
     *     å¦‚ä½•è®¡ç®—çª—å£ä¸­çš„çŸ³å­æ•°é‡: j-i+1
     *     ç©ºä½æ•°é‡: a[j] - a[i] - (j-i+1) + 1 ==> a[j] - a[i] + i - j
     *     å½“ç©ºä½æ•°é‡ä¸º 0 æ—¶: a[i] - i = a[j] - j
     *
     * æœ€å°ä¾‹å­ï¼š
     * [3,4,5,6,10]
     *   x: 3,4,5,6, |
     *   ^: 4,5,6, , |
     *   ^: 6, , , ,10|
     * éœ€è¦ä¸¤æ¬¡
     *
     * [3,4,5,6,8]
     * ä»…éœ€ä¸€æ¬¡
     *
     * 1. è‹¥å­˜åœ¨è¿ç»­çš„ n-1 ä¸ªçŸ³å­ï¼Œä¸”å·¦è¾¹æˆ–è€…å³è¾¹çš„ç©ºé—²ä¸º 1ï¼Œåˆ™ä»…éœ€ä¸€æ¬¡å°±å¯å®Œæˆï¼›
     * 2. è‹¥ç©ºé—² >= 2ï¼Œåˆ™æœ€å°‘éœ€è¦ 2 æ¬¡
     * 3. å…¶ä»–æ—¶å€™æœ€å°‘éœ€è¦ç©ºä½æ•°é‡æ¬¡ç§»åŠ¨
     * 1,3 å¯åˆå¹¶: æœ€å°‘ = min{a[j] - a[i] + i - j, 2}
     *
     * æœ€å¤§ä¾‹å­:
     * 1,10,20 -> 10,11,20 -> 11,12,20 -> ... -> 18,19,20
     * [2,9]
     */
    public int[] numMovesStonesII(int[] stones) {
        if (stones == null || stones.length < 3) return new int[]{0,0};

        int n = stones.length;
        Arrays.sort(stones);

        // k = a[-1] - a[0] - a.length + 1
        // æœ€ç»ˆå€¼ä¸º k - min{a[1]-a[0], a[-1]-a[-2]} + 1
        int max = stones[n-1] - stones[0] - n
                - Math.min(stones[n-1]-stones[n-2], stones[1]-stones[0])
                + 2;

        int min = Integer.MAX_VALUE;

        for (int i = 0; i < n; i++) {
            int j = i;
            while (j+1 < n && stones[j+1] - stones[i] + 1 <= n)
                j++;

            // çª—å£å¤§å°ä¸º n-1, æ­¤æ—¶è¿˜å‰©ä¸€ä¸ªå…ƒç´ 
            // å¿…é¡»æ˜¯è¿ç»­çš„ n-1 ä¸ªå…ƒç´ , æ‰€ä»¥ j-i+1 == n-1 ä¸è¡Œ; a[j] - a[i] == (n - 1) - 1
            // è¡¥å……: j-i+1 == n-1 && a[j] - a[i] == (n - 1) - 1
            if (stones[j] - stones[i] == n-2 && j-i+1 == n-1
                    && stones[i] - stones[0] + stones[n-1] - stones[j] >= 2)
                min = Math.min(2, min);
            // çª—å£å¤§å°ä¸åˆ° n, åŠ ä¸Šä¸‹ä¸€ä¸ªå…ƒç´ åçª—å£å¤§å°å¿…å®šè¶…è¿‡ n
            // ä¸€å…±æœ‰ n ä¸ªç©ºä½, n - (j-i+1)
            else
                min = Math.min(n + i - j - 1, min);
        }

        return new int[]{min, max};
    }

    public static void main(String[] args) {
        Solution1040 solution = new Solution1040();
        // int[] arg = new int[]{7,4,9};
        // int[] arg = new int[]{6,5,4,3,8};
        int[] arg = new int[]{6,5,4,3,10};
        int[] ints = solution.numMovesStonesII(arg);
        System.out.println(Arrays.toString(ints));
    }
}
//leetcode submit region end(Prohibit modification and deletion)
